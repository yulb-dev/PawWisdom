# ğŸ¾ PawWisdom - AI é©±åŠ¨çš„å® ç‰©å¥åº·ä¸ç”Ÿæ´»ç¤¾åŒº

PawWisdom æ˜¯ä¸€ä¸ªå…¨æ ˆå® ç‰©å¥åº·ç®¡ç†ä¸ç¤¾åŒºåº”ç”¨ï¼Œä½¿ç”¨ AI æŠ€æœ¯ä¸ºå® ç‰©ä¸»äººæä¾›æ™ºèƒ½æœåŠ¡ã€‚

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

PawWisdom æ—¨åœ¨æˆä¸ºå® ç‰©ä¸»äººçš„è´´å¿ƒä¼´ä¾£ï¼Œæä¾›ï¼š

- ğŸ¯ å® ç‰©æ¡£æ¡ˆç®¡ç†
- ğŸ¤– AI æƒ…ç»ªè¯†åˆ«
- ğŸ“ å¥åº·æ‰‹è´¦è®°å½•
- ğŸ‘¥ å® ç‰©ç¤¾åŒºäº’åŠ¨
- ğŸ“ åŒåŸå® ç‰©ç¤¾äº¤

## ğŸš€ æŠ€æœ¯æ ˆ

### åç«¯

- **æ¡†æ¶**: NestJS 11
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **ORM**: TypeORM
- **è®¤è¯**: JWT (Passport)
- **è¯­è¨€**: TypeScript

### å‰ç«¯

- **æ¡†æ¶**: React Native (Expo)
- **å¯¼èˆª**: Expo Router
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æ•°æ®è·å–**: TanStack React Query
- **HTTP å®¢æˆ·ç«¯**: Axios

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
PawWisdom/
â”œâ”€â”€ back-end/              # NestJS åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/        # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ entities/      # æ•°æ®åº“å®ä½“
â”‚   â”‚   â”œâ”€â”€ modules/       # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/      # è®¤è¯æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ users/     # ç”¨æˆ·æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ pets/      # å® ç‰©æ¨¡å—
â”‚   â”‚   â””â”€â”€ common/        # å…¬å…±èµ„æº
â”‚   â””â”€â”€ database/          # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ front-end/             # React Native å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/               # åº”ç”¨é¡µé¢
â”‚   â”‚   â”œâ”€â”€ auth/          # è®¤è¯é¡µé¢
â”‚   â”‚   â””â”€â”€ (tabs)/        # Tabå¯¼èˆªé¡µé¢
â”‚   â”œâ”€â”€ services/          # APIæœåŠ¡å±‚
â”‚   â”œâ”€â”€ store/             # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ config/            # é…ç½®æ–‡ä»¶
â””â”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
```

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

æ›´å¤šä¸“é¡¹æ–‡æ¡£è¯·æŸ¥çœ‹ï¼š[æ–‡æ¡£ç´¢å¼•](./docs/README.md)ã€‚

### âœ… å‰ç½®æ£€æŸ¥

- Node.js 18+ï¼ˆ`node --version`ï¼‰
- pnpm 8+ï¼ˆ`pnpm --version`ï¼‰
- Expo CLIï¼ˆ`npx expo --version`ï¼‰
- Gitï¼ˆ`git --version`ï¼‰
- Supabase è´¦å·

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <your-repo-url>
cd PawWisdom
```

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pnpm install
```

### 3. é…ç½® Supabase æ•°æ®åº“

1. åœ¨ [Supabase](https://supabase.com) åˆ›å»ºæ–°é¡¹ç›®
2. åœ¨ SQL Editor ä¸­è¿è¡Œ `back-end/database/init.sql` è„šæœ¬
3. è·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯

### 4. é…ç½®ç¯å¢ƒå˜é‡

#### åç«¯é…ç½®

```bash
cd back-end
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ Supabase é…ç½®ï¼š

```env
PORT=3000
NODE_ENV=development

# Supabase Database
SUPABASE_DB_HOST=db.xxxxx.supabase.co
SUPABASE_DB_PORT=5432
SUPABASE_DB_USER=postgres
SUPABASE_DB_PASSWORD=your-password
SUPABASE_DB_NAME=postgres

# JWT
JWT_SECRET=your-secret-key
JWT_EXPIRES_IN=7d

# Supabase
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

#### å‰ç«¯é…ç½®

```bash
cd front-end
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
EXPO_PUBLIC_API_URL=http://localhost:3000/api
```

### 5. å¯åŠ¨åº”ç”¨

#### å¯åŠ¨åç«¯æœåŠ¡

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
pnpm dev:backend

# æˆ–è€…åœ¨ back-end ç›®å½•
cd back-end
pnpm start:dev
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000/api` å¯åŠ¨

#### å¯åŠ¨å‰ç«¯åº”ç”¨

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
pnpm dev:frontend

# æˆ–è€…åœ¨ front-end ç›®å½•
cd front-end
pnpm start
```

ç„¶åæ‰«æäºŒç»´ç åœ¨ Expo Go åº”ç”¨ä¸­æ‰“å¼€ï¼Œæˆ–æŒ‰ï¼š

- `i` - iOS æ¨¡æ‹Ÿå™¨
- `a` - Android æ¨¡æ‹Ÿå™¨
- `w` - Web æµè§ˆå™¨

### 6. éªŒè¯å¯åŠ¨ç»“æœ

#### æµ‹è¯•åç«¯ API

è®¿é—® `http://localhost:3000/api`ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°å“åº”ã€‚

#### æµ‹è¯•å®Œæ•´æµç¨‹

1. åœ¨å‰ç«¯åº”ç”¨ä¸­ç‚¹å‡» "Register"
2. å¡«å†™æ³¨å†Œä¿¡æ¯ï¼ˆç”¨æˆ·åã€é‚®ç®±ã€å¯†ç ï¼‰
3. æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ
4. ç‚¹å‡» "Pets" Tab
5. æ·»åŠ ä½ çš„ç¬¬ä¸€åªå® ç‰©

### â“ å¸¸è§é—®é¢˜

#### åç«¯æ— æ³•å¯åŠ¨

```bash
# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
lsof -i :3000

# å¦‚æœè¢«å ç”¨ï¼Œæ€æ­»è¿›ç¨‹æˆ–æ›´æ”¹ç«¯å£
kill -9 $(lsof -ti:3000)
```

#### å‰ç«¯æ— æ³•è¿æ¥åç«¯

1. ç¡®è®¤åç«¯å·²å¯åŠ¨
2. æ£€æŸ¥ `front-end/.env` ä¸­çš„ API_URL
3. å¦‚æœä½¿ç”¨çœŸæœºæµ‹è¯•ï¼Œå°† `localhost` æ”¹ä¸ºä½ çš„å±€åŸŸç½‘ IPï¼š
   ```env
   EXPO_PUBLIC_API_URL=http://192.168.1.x:3000/api
   ```

#### æ•°æ®åº“è¿æ¥å¤±è´¥

1. æ£€æŸ¥ Supabase é¡¹ç›®æ˜¯å¦åœ¨è¿è¡Œ
2. éªŒè¯ `.env` ä¸­çš„æ•°æ®åº“é…ç½®
3. ç¡®è®¤å¯†ç æ­£ç¡®ï¼ˆæ²¡æœ‰å¤šä½™ç©ºæ ¼ï¼‰

#### Expo Go æ— æ³•æ‰«æäºŒç»´ç 

1. ç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ç½‘ç»œ
2. å°è¯•ä½¿ç”¨ Tunnel æ¨¡å¼ï¼š`pnpm start --tunnel`
3. æˆ–ä½¿ç”¨æ¨¡æ‹Ÿå™¨ä»£æ›¿çœŸæœºæµ‹è¯•

### ğŸ’¡ å¼€å‘æŠ€å·§

#### çƒ­é‡è½½

- åç«¯ä¿®æ”¹ä¼šè‡ªåŠ¨é‡å¯
- å‰ç«¯ä¿®æ”¹ä¼šè‡ªåŠ¨åˆ·æ–°

#### è°ƒè¯•

```bash
# åç«¯è°ƒè¯•
cd back-end
pnpm start:debug

# ç„¶ååœ¨ VS Code ä¸­é™„åŠ è°ƒè¯•å™¨
```

#### æŸ¥çœ‹æ—¥å¿—

```bash
# åç«¯æ—¥å¿—åœ¨ç»ˆç«¯ä¸­ç›´æ¥æ˜¾ç¤º
# å‰ç«¯æ—¥å¿—åœ¨ Expo Dev Tools ä¸­æŸ¥çœ‹
```

### ğŸ“š ä¸‹ä¸€æ­¥

æ¨èé˜…è¯»ï¼š

- [åç«¯ API æ–‡æ¡£](./back-end/README.md)
- [æ•°æ®åº“é…ç½®](./docs/DATABASE_SETUP.md)
- [éƒ¨ç½²æŒ‡å—](./docs/DEPLOYMENT.md)
- [æ›´å¤šæ–‡æ¡£](./docs/README.md)

## ğŸ¯ è¿­ä»£å¼€å‘è®¡åˆ’

### âœ… è¿­ä»£ 1ï¼šåŸºç¡€æ¡†æ¶ä¸ç”¨æˆ·ç³»ç»Ÿï¼ˆå·²å®Œæˆï¼‰

- [x] ç”¨æˆ·æ³¨å†Œä¸ç™»å½•
- [x] JWT Token è®¤è¯
- [x] å® ç‰©æ¡£æ¡ˆç®¡ç†ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- [x] ä¸ªäººä¸­å¿ƒé¡µé¢
- [x] åŸºç¡€é¡µé¢æ¡†æ¶

### ğŸ”„ è¿­ä»£ 2ï¼šAI æƒ…ç»ªè¯†åˆ«ä¸åŠ¨æ€å‘å¸ƒï¼ˆè¿›è¡Œä¸­ï¼‰

- [ ] é›†æˆç¬¬ä¸‰æ–¹ AI è¯†åˆ« API
- [ ] ç…§ç‰‡/è§†é¢‘ä¸Šä¼ å¤„ç†
- [ ] ç”Ÿæˆå® ç‰©å¿ƒæƒ…å¡
- [ ] åŠ¨æ€å‘å¸ƒç³»ç»Ÿ
- [ ] æ–‡ä»¶å­˜å‚¨æœåŠ¡(OSS)

### ğŸ“… è¿­ä»£ 3ï¼šç¤¾åŒºäº’åŠ¨ä¸ä¿¡æ¯æµ

- [ ] æ¨èæµä¸å…³æ³¨æµ
- [ ] ç‚¹èµè¯„è®ºåŠŸèƒ½
- [ ] ç”¨æˆ·å…³æ³¨ç³»ç»Ÿ
- [ ] åŠ¨æ€åˆ†é¡µåŠ è½½

### ğŸ“… è¿­ä»£ 4ï¼šå¥åº·è‡ªæŸ¥ä¸æ‰‹è´¦

- [ ] AI å¥åº·è‡ªæŸ¥
- [ ] å¥åº·äº‹ä»¶è®°å½•
- [ ] ä½“é‡æŠ˜çº¿å›¾
- [ ] å¥åº·æé†’è®¾ç½®

### ğŸ“… è¿­ä»£ 5ï¼šä¼˜åŒ–ä¸æ‰©å±•åŠŸèƒ½

- [ ] åŒåŸåŠŸèƒ½
- [ ] é€šçŸ¥ç³»ç»Ÿ
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ•°æ®ç»Ÿè®¡é¢æ¿

## ğŸ“ API æ–‡æ¡£

è¯¦ç»†çš„ API æ–‡æ¡£è¯·æŸ¥çœ‹ï¼š[åç«¯ README](./back-end/README.md)

### ä¸»è¦æ¥å£

#### è®¤è¯ç›¸å…³

- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·

#### ç”¨æˆ·ç›¸å…³

- `GET /api/users/profile` - è·å–ç”¨æˆ·èµ„æ–™
- `PATCH /api/users/profile` - æ›´æ–°ç”¨æˆ·èµ„æ–™
- `DELETE /api/users/profile` - åˆ é™¤ç”¨æˆ·è´¦å·

#### å® ç‰©ç›¸å…³

- `POST /api/pets` - åˆ›å»ºå® ç‰©æ¡£æ¡ˆ
- `GET /api/pets` - è·å–æˆ‘çš„å® ç‰©åˆ—è¡¨
- `GET /api/pets/:id` - è·å–å® ç‰©è¯¦æƒ…
- `PATCH /api/pets/:id` - æ›´æ–°å® ç‰©ä¿¡æ¯
- `DELETE /api/pets/:id` - åˆ é™¤å® ç‰©æ¡£æ¡ˆ

## ğŸ§ª æµ‹è¯•

### åç«¯æµ‹è¯•

```bash
cd back-end

# å•å…ƒæµ‹è¯•
pnpm test

# E2Eæµ‹è¯•
pnpm test:e2e

# æµ‹è¯•è¦†ç›–ç‡
pnpm test:cov
```

### å‰ç«¯æµ‹è¯•

```bash
cd front-end
pnpm test
```

## ğŸ“š æ•°æ®åº“è®¾è®¡

é¡¹ç›®ä½¿ç”¨ Supabase (PostgreSQL) ä½œä¸ºæ•°æ®åº“ã€‚

### ä¸»è¦è¡¨ç»“æ„

- `users` - ç”¨æˆ·è¡¨
- `pets` - å® ç‰©è¡¨
- `user_sessions` - ç”¨æˆ·ä¼šè¯è¡¨

æ›´å¤šè¯¦æƒ…è¯·æŸ¥çœ‹ `back-end/database/init.sql`

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡**: æ°¸è¿œä¸è¦æäº¤ `.env` æ–‡ä»¶åˆ°ç‰ˆæœ¬æ§åˆ¶
2. **JWT å¯†é’¥**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å¼ºéšæœºå¯†é’¥
3. **æ•°æ®åº“å¯†ç **: ä½¿ç”¨ Supabase æä¾›çš„å¼ºå¯†ç 
4. **CORS**: ç”Ÿäº§ç¯å¢ƒé…ç½®æ­£ç¡®çš„ CORS ç­–ç•¥
5. **RLS**: ç¡®ä¿ Supabase Row Level Security å·²æ­£ç¡®é…ç½®

## ğŸ“– å¼€å‘æŒ‡å—

### Git å·¥ä½œæµ

è¯·éµå¾ªé¡¹ç›®çš„ Git å·¥ä½œæµè§„èŒƒï¼Œè¯¦è§ [Git å·¥ä½œæµè§„èŒƒ](./.cursor/rules/git-workflow.mdc)

### Commit è§„èŒƒ

ä½¿ç”¨ Conventional Commits æ ¼å¼ï¼š

```bash
feat(pet): æ·»åŠ å® ç‰©æƒ…ç»ªè¯†åˆ«åŠŸèƒ½
fix(auth): ä¿®å¤ç™»å½•ä»¤ç‰ŒéªŒè¯é”™è¯¯
docs(readme): æ›´æ–°å®‰è£…æŒ‡å—
```

### ä»£ç è§„èŒƒ

- åç«¯éµå¾ª [NestJS æœ€ä½³å®è·µ](./.cursor/rules/backend-nestjs.mdc)
- å‰ç«¯éµå¾ª [React Native æœ€ä½³å®è·µ](./.cursor/rules/frontend-react-native.mdc)
- æ•°æ®åº“éµå¾ª [Supabase + TypeORM è§„èŒƒ](./.cursor/rules/database-supabase-typeorm.mdc)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat(scope): add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºç§æœ‰é¡¹ç›®ï¼Œä»…ä¾›å¼€å‘å›¢é˜Ÿä½¿ç”¨ã€‚

## ğŸ‘¥ å›¢é˜Ÿ

PawWisdom Development Team

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

**å¼€å‘çŠ¶æ€**: è¿­ä»£ 1 å·²å®Œæˆ | **ç‰ˆæœ¬**: v0.1.0 | **æ›´æ–°æ—¶é—´**: 2026-02
